{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{getRankingByTournament}from'../services/rankingService';import{useParams,Link}from'react-router-dom';import{AuthContext}from'../contexts/AuthContext';import'./TournamentRanking.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TournamentRanking=()=>{const[ranking,setRanking]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const{tournamentId}=useParams();const{user}=useContext(AuthContext);useEffect(()=>{const fetchRanking=async()=>{try{setLoading(true);const data=await getRankingByTournament(tournamentId);setRanking(data);setError(null);}catch(err){setError('Impossible de charger le classement: '+err.message);}finally{setLoading(false);}};if(tournamentId){fetchRanking();}},[tournamentId]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Chargement du classement...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error});}if(!ranking||!ranking.teamsWithDetails){return/*#__PURE__*/_jsx(\"div\",{className:\"empty-ranking\",children:\"Aucun classement disponible pour ce tournoi.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-ranking\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ranking-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:ranking.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"ranking-actions\",children:[/*#__PURE__*/_jsx(Link,{to:`/tournaments/${tournamentId}`,className:\"back-link\",children:\"Retour au tournoi\"}),user&&user.role==='admin'&&/*#__PURE__*/_jsx(Link,{to:`/tournaments/${tournamentId}/update-ranking`,className:\"update-link\",children:\"Mettre \\xE0 jour le classement\"})]})]}),ranking.teamsWithDetails.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Aucune \\xE9quipe class\\xE9e pour le moment.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"ranking-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Position\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\xC9quipe\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Points\"}),/*#__PURE__*/_jsx(\"th\",{children:\"J\"}),/*#__PURE__*/_jsx(\"th\",{children:\"V\"}),/*#__PURE__*/_jsx(\"th\",{children:\"N\"}),/*#__PURE__*/_jsx(\"th\",{children:\"D\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:ranking.teamsWithDetails.map(teamRanking=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:teamRanking.position}),/*#__PURE__*/_jsx(\"td\",{children:teamRanking.team?teamRanking.team.name:`Équipe #${teamRanking.teamId}`}),/*#__PURE__*/_jsx(\"td\",{children:teamRanking.points}),/*#__PURE__*/_jsx(\"td\",{children:teamRanking.matchesPlayed}),/*#__PURE__*/_jsx(\"td\",{children:teamRanking.wins}),/*#__PURE__*/_jsx(\"td\",{children:teamRanking.draws}),/*#__PURE__*/_jsx(\"td\",{children:teamRanking.losses})]},teamRanking.teamId))})]})]});};export default TournamentRanking;","map":{"version":3,"names":["React","useEffect","useState","useContext","getRankingByTournament","useParams","Link","AuthContext","jsx","_jsx","jsxs","_jsxs","TournamentRanking","ranking","setRanking","loading","setLoading","error","setError","tournamentId","user","fetchRanking","data","err","message","className","children","teamsWithDetails","name","to","role","length","map","teamRanking","position","team","teamId","points","matchesPlayed","wins","draws","losses"],"sources":["/root/projet/module-133-classe-300231-valleliant/projet/client1/src/components/TournamentRanking.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { getRankingByTournament } from '../services/rankingService';\nimport { useParams, Link } from 'react-router-dom';\nimport { AuthContext } from '../contexts/AuthContext';\nimport './TournamentRanking.css';\n\nconst TournamentRanking = () => {\n  const [ranking, setRanking] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const { tournamentId } = useParams();\n  const { user } = useContext(AuthContext);\n\n  useEffect(() => {\n    const fetchRanking = async () => {\n      try {\n        setLoading(true);\n        const data = await getRankingByTournament(tournamentId);\n        setRanking(data);\n        setError(null);\n      } catch (err) {\n        setError('Impossible de charger le classement: ' + err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (tournamentId) {\n      fetchRanking();\n    }\n  }, [tournamentId]);\n\n  if (loading) {\n    return <div className=\"loading\">Chargement du classement...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error-message\">{error}</div>;\n  }\n\n  if (!ranking || !ranking.teamsWithDetails) {\n    return <div className=\"empty-ranking\">Aucun classement disponible pour ce tournoi.</div>;\n  }\n\n  return (\n    <div className=\"tournament-ranking\">\n      <div className=\"ranking-header\">\n        <h2>{ranking.name}</h2>\n        <div className=\"ranking-actions\">\n          <Link to={`/tournaments/${tournamentId}`} className=\"back-link\">\n            Retour au tournoi\n          </Link>\n          {user && user.role === 'admin' && (\n            <Link to={`/tournaments/${tournamentId}/update-ranking`} className=\"update-link\">\n              Mettre à jour le classement\n            </Link>\n          )}\n        </div>\n      </div>\n      \n      {ranking.teamsWithDetails.length === 0 ? (\n        <p>Aucune équipe classée pour le moment.</p>\n      ) : (\n        <table className=\"ranking-table\">\n          <thead>\n            <tr>\n              <th>Position</th>\n              <th>Équipe</th>\n              <th>Points</th>\n              <th>J</th>\n              <th>V</th>\n              <th>N</th>\n              <th>D</th>\n            </tr>\n          </thead>\n          <tbody>\n            {ranking.teamsWithDetails.map((teamRanking) => (\n              <tr key={teamRanking.teamId}>\n                <td>{teamRanking.position}</td>\n                <td>{teamRanking.team ? teamRanking.team.name : `Équipe #${teamRanking.teamId}`}</td>\n                <td>{teamRanking.points}</td>\n                <td>{teamRanking.matchesPlayed}</td>\n                <td>{teamRanking.wins}</td>\n                <td>{teamRanking.draws}</td>\n                <td>{teamRanking.losses}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\nexport default TournamentRanking; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}