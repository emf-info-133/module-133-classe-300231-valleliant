{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{AuthContext}from'../contexts/AuthContext';import{getAllTournaments}from'../services/tournamentService';import TournamentCard from'../components/tournaments/TournamentCard';import TeamCreationModal from'../components/teams/TeamCreationModal';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TournamentList=()=>{const[tournaments,setTournaments]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedTournament,setSelectedTournament]=useState(null);const[showTeamModal,setShowTeamModal]=useState(false);const{user,logout}=useContext(AuthContext);const navigate=useNavigate();useEffect(()=>{if(!user){navigate('/login');return;}const fetchTournaments=async()=>{try{const data=await getAllTournaments();setTournaments(data);}catch(err){setError('Impossible de récupérer les tournois');console.error(err);}finally{setLoading(false);}};fetchTournaments();},[user,navigate]);const handleCreateTeam=tournament=>{setSelectedTournament(tournament);setShowTeamModal(true);};const handleLogout=()=>{logout();navigate('/login');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xl\",children:\"Chargement des tournois...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-md p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Tournois\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Bonjour, \",user===null||user===void 0?void 0:user.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition\",children:\"D\\xE9connexion\"})]})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"container mx-auto py-8\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:tournaments.length>0?tournaments.map(tournament=>/*#__PURE__*/_jsx(TournamentCard,{tournament:tournament,onCreateTeam:()=>handleCreateTeam(tournament)},tournament.id)):/*#__PURE__*/_jsx(\"p\",{className:\"col-span-3 text-center text-gray-600 text-lg\",children:\"Aucun tournoi disponible pour le moment.\"})})]}),showTeamModal&&selectedTournament&&/*#__PURE__*/_jsx(TeamCreationModal,{tournament:selectedTournament,onClose:()=>setShowTeamModal(false)})]});};export default TournamentList;","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","getAllTournaments","TournamentCard","TeamCreationModal","useNavigate","jsx","_jsx","jsxs","_jsxs","TournamentList","tournaments","setTournaments","loading","setLoading","error","setError","selectedTournament","setSelectedTournament","showTeamModal","setShowTeamModal","user","logout","navigate","fetchTournaments","data","err","console","handleCreateTeam","tournament","handleLogout","className","children","name","onClick","length","map","onCreateTeam","id","onClose"],"sources":["/root/projet/module-133-classe-300231-valleliant/projet/client1/src/pages/TournamentList.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { getAllTournaments } from '../services/tournamentService';\nimport TournamentCard from '../components/tournaments/TournamentCard';\nimport TeamCreationModal from '../components/teams/TeamCreationModal';\nimport { useNavigate } from 'react-router-dom';\n\nconst TournamentList = () => {\n  const [tournaments, setTournaments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedTournament, setSelectedTournament] = useState(null);\n  const [showTeamModal, setShowTeamModal] = useState(false);\n  \n  const { user, logout } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n\n    const fetchTournaments = async () => {\n      try {\n        const data = await getAllTournaments();\n        setTournaments(data);\n      } catch (err) {\n        setError('Impossible de récupérer les tournois');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchTournaments();\n  }, [user, navigate]);\n\n  const handleCreateTeam = (tournament) => {\n    setSelectedTournament(tournament);\n    setShowTeamModal(true);\n  };\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <p className=\"text-xl\">Chargement des tournois...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <header className=\"bg-white shadow-md p-4\">\n        <div className=\"container mx-auto flex justify-between items-center\">\n          <h1 className=\"text-2xl font-bold\">Tournois</h1>\n          <div className=\"flex items-center space-x-4\">\n            <span>Bonjour, {user?.name}</span>\n            <button \n              onClick={handleLogout}\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition\"\n            >\n              Déconnexion\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"container mx-auto py-8\">\n        {error && (\n          <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {tournaments.length > 0 ? (\n            tournaments.map((tournament) => (\n              <TournamentCard \n                key={tournament.id} \n                tournament={tournament} \n                onCreateTeam={() => handleCreateTeam(tournament)}\n              />\n            ))\n          ) : (\n            <p className=\"col-span-3 text-center text-gray-600 text-lg\">\n              Aucun tournoi disponible pour le moment.\n            </p>\n          )}\n        </div>\n      </main>\n\n      {showTeamModal && selectedTournament && (\n        <TeamCreationModal \n          tournament={selectedTournament}\n          onClose={() => setShowTeamModal(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default TournamentList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}